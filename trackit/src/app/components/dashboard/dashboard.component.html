<div class="dashboard-container">
    <app-navbar (toggleSidenav)="toggleSidenav()"></app-navbar>
    
    <mat-sidenav-container class="sidenav-container">
      <mat-sidenav #sidenav 
                   [mode]="isMobile ? 'over' : 'side'" 
                   [opened]="sidenavOpened" 
                   class="sidenav"
                   (click)="closeSidenavOnMobile()">
        <app-sidebar (closeSidenav)="closeSidenavOnMobile()"></app-sidebar>
      </mat-sidenav>
      
      <mat-sidenav-content class="main-content">
        <div class="content-wrapper">
          <!-- Backend Connection Test Section -->
          <mat-card class="connection-test-card">
            <mat-card-header>
              <mat-card-title>
                <mat-icon>wifi</mat-icon>
                Backend Connection Status
              </mat-card-title>
            </mat-card-header>
            <mat-card-content>
              <div *ngIf="isLoading" class="loading-section">
                <mat-spinner diameter="30"></mat-spinner>
                <p>Testing backend connection...</p>
              </div>
              
              <div *ngIf="!isLoading && expenses.length > 0" class="success-section">
                <mat-icon class="success-icon">check_circle</mat-icon>
                <h3>✅ Backend Connected Successfully!</h3>
                <p>Found {{ expenses.length }} expenses in the database</p>
                <div class="expense-preview">
                  <h4>Sample Expenses:</h4>
                  <ul>
                    <li *ngFor="let expense of expenses.slice(0, 3)">
                      <strong>{{ expense.title }}</strong> - ${{ expense.amount }} ({{ expense.category }})
                    </li>
                  </ul>
                </div>
              </div>
              
              <div *ngIf="!isLoading && expenses.length === 0" class="error-section">
                <mat-icon class="error-icon">error</mat-icon>
                <h3>❌ Backend Connection Failed</h3>
                <p>Unable to connect to the backend server</p>
              </div>
            </mat-card-content>
          </mat-card>
          
          <app-expense-list></app-expense-list>
        </div>
      </mat-sidenav-content>
    </mat-sidenav-container>
  </div>